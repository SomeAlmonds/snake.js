(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))m(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const g of n.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&m(g)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function m(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const u=document.createElement("canvas");u.id="canvas";u.className="canvas";const v=document.getElementById("canvas-div");v.appendChild(u);const a=u.height=400,f=u.width=400,c=u.getContext("2d");c.fillStyle="white";c.strokeStyle="white";c.lineWidth=2;if(window.localStorage.getItem("snake-score-list")){let s=document.getElementsByClassName("score-item");for(let t=0;t<s.length;t++)s[t].innerText=window.localStorage.getItem("snake-score-list").split(",")[t]||0}class x{constructor(){this.sections=[{x:a/2,y:f/2},{x:a/2,y:f/2+20}],this.step=a/20,this.rotation=0,this.lastRotation=0}}let e=new x;class E{constructor(){this.foodGrid=Array.from({length:20},(t,r)=>5+r*e.step),this.possition={x:this.newPossition("x"),y:this.newPossition("y")}}newPossition(t){let r=this.foodGrid[Math.floor(Math.random()*20)];return t==="y"&&e.sections.forEach(m=>{Array.from({length:20},(o,n)=>n+m.y).includes(r)&&Array.from({length:20},(o,n)=>n+m.x).includes(this.possition.x)&&(this.possition.x=this.foodGrid[Math.floor(Math.random()*20)],this.newPossition(t))}),r}}let i=new E;window.addEventListener("keydown",s=>R(s.key));function R(s){switch(e.lastRotation=e.rotation,s){case"w":e.lastRotation!==180&&(e.rotation=0);break;case"d":e.lastRotation!==270&&(e.rotation=90);break;case"s":e.lastRotation!==0&&(e.rotation=180);break;case"a":e.lastRotation!==90&&(e.rotation=270);break}}function I(){let s=e.sections.length;for(let t=0;t<=s-2;t++)e.sections[s-1-t].x=e.sections[s-2-t].x,e.sections[s-1-t].y=e.sections[s-2-t].y;switch(e.rotation){case 0:e.sections[0].y-=e.step;break;case 90:e.sections[0].x+=e.step;break;case 180:e.sections[0].y+=e.step;break;case 270:e.sections[0].x-=e.step;break}h||(e.sections[0].x>=f?e.sections[0].x=0:e.sections[0].x<0&&(e.sections[0].x+=f),e.sections[0].y>=a?e.sections[0].y=0:e.sections[0].y<0&&(e.sections[0].y+=a))}function S(){Array.from({length:20},(s,t)=>t+e.sections[0].x).includes(i.possition.x+5)&&Array.from({length:20},(s,t)=>t+e.sections[0].y).includes(i.possition.y+5)&&(i.possition.x=i.newPossition("x"),i.possition.y=i.newPossition("y"),e.sections.push({x:e.sections[e.sections.length-1].x,y:e.sections[e.sections.length-1].y}),p+=10,document.getElementById("score-counter").innerText=`SCORE: ${p}`),e.sections.slice(1).forEach(s=>{s.x===e.sections[0].x&&s.y===e.sections[0].y&&(d=1)}),h&&((e.sections[0].x>=f||e.sections[0].x<0)&&(d=1),(e.sections[0].y>=a||e.sections[0].y<0)&&(d=1))}function k(){c.clearRect(0,0,f,a),c.save(),e.sections.forEach(s=>{c.fillRect(s.x,s.y,20,20)}),c.fillRect(i.possition.x,i.possition.y,10,10),c.restore()}function O(){y.push(p),y.sort((t,r)=>r-t);let s=document.getElementsByClassName("score-item");for(let t=0;t<s.length;t++)s[t].innerText=y[t]||0;window.localStorage.setItem("snake-score-list",[...y]),p=0,e=new x,i=new E,l=!0,document.getElementById("start-btn").innerText="START"}let l=!0,w=0,A=1e3/4,p=0,y=[];window.localStorage.getItem("snake-score-list")&&(y=window.localStorage.getItem("snake-score-list").split(","));let h=0,d=0;function b(){if(performance.now()-w>=A){if(d){O();return}I(),S(),k(),w=performance.now()}if(!l)window.requestAnimationFrame(b);else return}document.getElementById("start-btn").addEventListener("click",()=>{d&&(document.getElementById("score-counter").innerText=`SCORE: ${p}`,d=0),l=!l,document.getElementById("start-btn").innerText=l?"START":"PAUSE",l||b()});document.getElementById("mode-btn").addEventListener("click",()=>{h=!h,document.getElementById("mode-btn").innerText=h?"MODE: HARD":"MODE: EASY"});
